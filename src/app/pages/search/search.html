<div class="pb-4">
    <div class="px-4 py-3">
        <div class="relative">
            <div class="absolute left-4 top-1/2 -translate-y-1/2">
                <app-icon name="search-base" class="w-5 h-5 text-white/40"></app-icon>
            </div>
            <input
                type="text"
                [(ngModel)]="searchQuery"
                (ngModelChange)="onSearch()"
                (keyup.enter)="onSearch()"
                placeholder="Search slots..."
                class="w-full bg-white/5 border border-white/10 rounded-2xl pl-12 pr-12 py-3 text-white placeholder:text-white/40 focus:outline-none focus:border-primary/50 transition-colors"
            />
            @if (searchQuery) {
                <button
                    (click)="clearSearch()"
                    class="absolute right-4 top-1/2 -translate-y-1/2 text-white/40 hover:text-white/80 transition-colors cursor-pointer">
                    <app-icon name="close" class="w-5 h-5"></app-icon>
                </button>
            }
        </div>
    </div>

    @if (isSearching()) {
        <div class="px-4">
            <h2 class="text-lg font-bold text-white mb-3">Search Results ({{ searchResults().length }})</h2>
            @if (searchResults().length > 0) {
                <div class="grid grid-cols-3 md:grid-cols-5 gap-3">
                    @for (game of searchResults(); track game.id) {
                       <app-game-card [game]="game"></app-game-card>
                    }
                </div>
            } @else {
                <div class="text-center py-8">
                    <p class="text-white/60">No games found</p>
                </div>
            }
        </div>
    } @else {
        <div class="px-4 py-3">
            <div class="flex items-center gap-2 mb-3">
                <app-icon name="clock" class="w-5 h-5 text-white"></app-icon>
                <h2 class="text-lg font-bold text-white">Recent Searches</h2>
            </div>
            <div class="flex flex-wrap gap-2">
                @for (search of recentSearches(); track search) {
                    <button
                        (click)="selectRecentSearch(search)"
                        class="px-4 py-2 bg-white/5 rounded-xl text-sm text-white/80 hover:bg-white/10 transition-colors">
                        {{ search }}
                    </button>
                }
            </div>
        </div>

        <div class="px-4 py-3">
            <h2 class="text-lg font-bold text-white mb-3">Top Providers</h2>
            <div class="grid grid-cols-2 gap-3">
                @for (provider of providers(); track provider.name) {
                    <button
                        (click)="navigateToProvider(provider.name)"
                        class="bg-white/5 rounded-2xl p-4 hover:bg-white/10 transition-colors cursor-pointer text-left">
                        <h3 class="text-white font-bold text-base mb-1">{{ provider.name }}</h3>
                        <p class="text-white/60 text-sm">{{ provider.games.length }} games</p>
                    </button>
                }
            </div>
        </div>
    }