<div class="container mx-auto px-4 py-6">
  <!-- Search Input -->
  <div class="relative mb-8">
    <div class="relative">
      <div class="absolute left-4 top-1/2 -translate-y-1/2 text-white/40 w-6 h-6 flex items-center justify-center">
        <app-icon name="search-base" class="w-6 h-6"></app-icon>
      </div>
      <input
        type="text"
        [(ngModel)]="searchQuery"
        (input)="onSearch()"
        placeholder="Search games or providers..."
        class="w-full bg-white/5 border border-white/10 rounded-xl pl-12 pr-12 py-4 text-white placeholder:text-white/40 focus:outline-none focus:border-primary/50 focus:bg-white/10 transition-all"
      />
      @if (searchQuery()) {
        <button
          (click)="clearSearch()"
          class="absolute right-4 top-1/2 -translate-y-1/2 text-white/40 hover:text-white transition-colors"
        >
          <app-icon name="close"></app-icon>
        </button>
      }
    </div>
  </div>

  <!-- Search Results -->
  @if (searchQuery() && searchResults().length > 0) {
    <div class="mb-8">
      <h3 class="text-white text-lg font-semibold mb-4">Search Results ({{ searchResults().length }})</h3>
      <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3">
        @for (game of searchResults(); track game.id) {
          <app-game-card [game]="game"></app-game-card>
        }
      </div>
    </div>
  }

  <!-- No Results -->
  @if (searchQuery() && searchResults().length === 0) {
    <div class="text-center py-12">
      <div class="text-white/30 mb-2">
        <app-icon name="search-base" class="text-4xl"></app-icon>
      </div>
      <p class="text-white/50 text-lg mb-1">No results found</p>
      <p class="text-white/30 text-sm">Try searching for something else</p>
    </div>
  }

  <!-- Recent Searches -->
  @if (!searchQuery() && recentSearches().length > 0) {
    <div class="mb-8">
      <div class="flex items-center gap-2 mb-4">
        <app-icon name="clock" class="text-white"></app-icon>
        <h3 class="text-white text-lg font-semibold">Recent Searches</h3>
      </div>
      <div class="flex flex-wrap gap-2">
        @for (search of recentSearches(); track search) {
          <button
            (click)="selectRecentSearch(search)"
            class="group relative px-4 py-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-full text-white text-sm transition-all"
          >
            {{ search }}
            <span
              (click)="removeRecentSearch(search, $event)"
              class="ml-2 text-white/40 hover:text-white transition-colors"
            >
              Ã—
            </span>
          </button>
        }
      </div>
    </div>
  }

  <!-- Top Providers -->
  @if (!searchQuery()) {
    <div>
      <h3 class="text-white text-lg font-semibold mb-4">Top Providers</h3>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
        @for (provider of topProviders; track provider.id) {
          <button
            (click)="selectProvider(provider)"
            class="p-4 bg-white/5 hover:bg-white/10 border border-white/10 hover:border-primary/50 rounded-xl text-left transition-all group"
          >
            <h4 class="text-white font-semibold mb-1 group-hover:text-primary transition-colors">{{ provider.name }}</h4>
            <p class="text-white/50 text-sm">{{ provider.gamesCount }} games</p>
          </button>
        }
      </div>
    </div>
  }
</div>
